!function(){"use strict";class e{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent=" ",this._errorMessageEl.classList.remove(this._errorClass)}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_checkInputValidity(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()})),this._setEventListeners(),this.toggleButtonState()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)}))}}class t{constructor(e,t,s,o){this._name=e,this._link=t,this._cardSelector=s,this._handleImageClick=o}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})})),this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeButton()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeletteButton()}))}_handleLikeButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeletteButton(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__image").setAttribute("src",this._link),this._cardElement.querySelector(".card__image").setAttribute("alt",this._name),this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class o extends s{constructor(e,t){let{popupSelector:s}=e;super({popupSelector:s}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupElement.querySelectorAll(".modal__input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),super.close()}))}close(){this._popupForm.reset(),super.close()}}const r=(document.querySelector("#profile__edit-button"),document.querySelector("#profile__edit-modal")),n=(document.querySelector("#profile__close-modal"),document.querySelector("#profile__title"),document.querySelector("#profile__title-input")),i=(document.querySelector("#profile__description"),document.querySelector("#profile__description-input")),l=r.querySelector(".modal__form"),a=(document.querySelector(".cards__list"),document.querySelector("#profile__add-button"),document.querySelector("#profile__add-form"),document.querySelector("#add-card-form")),c=(document.querySelector(".modal__input_type_title"),document.querySelector(".modal__input-type_url"),document.querySelector("#profile__close-modal-place"),document.querySelector("#preview__image_modal")),u=(c.querySelector("#modal__image-close-button"),c.querySelector("#modal__image"),c.querySelector("#modal__image_description"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"});function _(e){return new t(e.name||e.Name,e.link||e.Link,"#card-template",S).getView()}new e(u,l).enableValidation(),new e(u,a).enableValidation();const d=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:_},".cards__list");d.renderItems(),document.querySelector("#profile__add-button").addEventListener("click",(()=>{h.open()}));const m=new o({popupSelector:"#profile__edit-modal"},(function(e){const{title:t,description:s}=e;p.setUserInfo(t,s),m.close()}));m.setEventListeners();const p=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._name=document.querySelector(t),this._job=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e,t){this._name&&this._job?(this._name.textContent=e,this._job.textContent=t):console.error("Name or job element is not found.")}}({nameSelector:"#profile__title",jobSelector:"#profile__description"});document.querySelector("#profile__edit-button").addEventListener("click",(()=>{const e=p.getUserInfo();n.value=e.name.trim(),i.value=e.job.trim(),m.open()}));const h=new o({popupSelector:"#profile__add-form"},(function(e){const{name:t,link:s}=e,o=_({name:t,link:s});d.addItem(o),h.close()}));h.setEventListeners();const E=new class extends s{constructor(e){super({popupSelector:e})}open(e){this._description=this._popupElement.querySelector(".modal__image_description"),this._image=this._popupElement.querySelector(".modal__image"),this._description.textContent=e.name,this._image.src=e.link,this._image.alt=e.name,super.open()}}("#preview__image_modal");function S(e){E.open(e)}E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUFFYixjQUFlLHVCQXpFbkIsU0FBNkJnRCxHQUMzQixNQUFNLEtBQUVuRSxFQUFJLEtBQUVDLEdBQVNrRSxFQVFqQmMsRUFBYy9CLEVBTkgsQ0FFZmxELEtBQU1BLEVBQ05DLEtBQU1BLElBSVJxRCxFQUFZUyxRQUFRa0IsR0FFcEJoQixFQUFjeEMsT0FDaEIsSUFnRUF3QyxFQUFjcEMsb0JBSWQsTUFBTXFELEVBQWEsSUdoTUosY0FBNkJqRSxFQUMxQ2xFLFdBQUFBLENBQVlvRSxHQUNWZSxNQUFNLENBQUVmLGlCQUNWLENBRUFLLElBQUFBLENBQUsyRCxHQUNIakksS0FBS2tJLGFBQWVsSSxLQUFLa0UsY0FBY25ELGNBQ3JDLDZCQUVGZixLQUFLbUksT0FBU25JLEtBQUtrRSxjQUFjbkQsY0FBYyxpQkFFL0NmLEtBQUtrSSxhQUFhL0csWUFBYzhHLEVBQUtuRixLQUNyQzlDLEtBQUttSSxPQUFPQyxJQUFNSCxFQUFLbEYsS0FDdkIvQyxLQUFLbUksT0FBT0UsSUFBTUosRUFBS25GLEtBQ3ZCa0MsTUFBTVYsTUFDUixHSGlMb0MseUJBRXRDLFNBQVNyQixFQUFpQmdELEdBRXhCK0IsRUFBVzFELEtBQUsyQixFQUNsQixDQUVBK0IsRUFBV3JELG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICB9XHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiIFwiO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgb3B0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsLCBvcHRpb25zKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgLy8gdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbHMsIHN1Ym1pdEJ1dHRvbiwgb3B0aW9ucyk7IC8vLy8gZGUgZXN0YSBmb3JtYSBlbCBib3RvbiBubyBlc3RhIGFjdGl2YWRvIGRlc2RlIHF1ZSBzZSBhYnJlIGVsIHBvcHVwXHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIGxpbmssIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuICAvLy8vLy8vZXZlbnQgbGlzdGVuZXJzLy8vLy8vL1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vZXZlbnRsaXN0ZW5lciBwYXJhIG1vZGFsIGRlIGxhIGltYWdlblxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xyXG4gICAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcclxuICAgICAgICAgIGxpbms6IHRoaXMuX2xpbmssXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIikgLy9hY2EgYWdyZWdhbW9zIGVsIGV2ZW50bGlzdGVuZXIgYWwgbGlrZSBidXR0b25cclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpOyAvLyBlc3RvIHZhIGEgbGxhbWFyIGFsIGhhbmRsZXIgcGFyYSBhZ3JlZ2FyIG8gcXVpdGFyIGxhIGNsYXNlLlxyXG4gICAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXR0ZUJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgLy8vLy8vLy9oYW5kbGVycy8vLy8vLy8vLy9cclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlRGVsZXR0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuICAvLy8vLy8vZnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBjYXJkcy8vLy8vLy9cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpOyAvL0FzaSBvYnRlbmVtb3MgZWwgdGVtcGxhdGUgeSBsbyBjbG9uYW1vcy5cclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCAvLyBPYnRlbmVtb3MgbGEgaW1hZ2VuIHkgbGUgYXNpZ25hbW9zIGVsIFwic3JjXCIuXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5fbGluayk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCAvLyBPYnRlbmVtb3MgbGEgaW1hZ2VuIHkgbGUgYXNpZ25hbW9zIGVsIFwic3JjXCIuXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTsgLy9hc2kgbGEgZGVzY3JpcGNpb24gZGUgbGEgY2FyZC5cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvL2Z1bmNpb24gcXVlIGxsYW1hIGxvcyBldmVudGxpc3RlbmVyc1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDsgLy8geSBhbCB1bHRpbW8gZGV2b2x2ZW1vcyBsYSBjYXJkIGNvbXBsZXRhIGFzaSB2YSBkb25kZSBleHBvcnRhbW9zIGVzdGEgY2xhc2UuXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgLy8gdG9tYSBlbCBwb3B1cFNlbGVjdG9yIGRlIGxhIGNsYXNlIGhpam8geSBnZW5lcmEgZWwgcG9wdXBFbGVtZW50IHF1ZSBsbyBwdWVkZSB1c2FyIGxhIGNsYXNlIGhpam9cclxuXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vY2xvc2UgcG9wdXAgYW5kIHJlbW92ZSBoYW5kbGVFc2NDbG9zZVxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAvL2FjYSBwYXNvIGVsIHZhbG9yIChcInByb2ZpbGVfX2FkZC1mb3JtXCIpIGEgbGEgY2xhc2UgcGFkcmUgKFBvcHVwLmpzKSwgdXNhbmRvIHN1cGVyLlxyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vIGhhY2VyIHVuIG9iamV0byBwYXJhIGxvcyBpbnB1dHNcclxuICAgIGNvbnN0IGlucHV0T2JqZWN0ID0ge307XHJcblxyXG4gICAgLy8gbm9tYnJhIGNhZGEgaW5wdXQgY29uIHN1IHZhbG9yXHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0T2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyB5IGRldnVlbHZlIGVsIGlucHV0IGNvbiBlbCB2YWxvciBkZWwgbm9tYnJlXHJcbiAgICByZXR1cm4gaW5wdXRPYmplY3Q7XHJcbiAgfVxyXG5cclxuICAvLyBfZ2V0SW5wdXRWYWx1ZSBzaG91bGQgYmUgY2FsbGVkIHRvIGdldCB0aGUgb2JqZWN0LlxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7IC8vIHN1cGVyIHNlIHJlZmllcmUgYWwgcGFkcmUsIG9zZWEgZWwgbWV0aG9kIGNsb3NlIGRlbCBwYWRyZVxyXG4gIH1cclxufVxyXG5cclxuLy9pbmRleC5qcyAocHJldGVuZG8gcXVlIGVzdG95IGVuIGluZGV4LmpzLCBlc3RvIGVzIGNvbW8geW8gaW5zdGFudGlhdGUgdW5hIGNsYXNlIGVuIGVsIGluZGV4LmpzKS5cclxuXHJcbi8vIGltcCBlbnRyZSBwYXJlbnRlc2lzIHZhbiBsb3MgdmFsb3JlcyBxdWUgcGFzbyBhIGxvcyBwYXJhbWV0cm9zIGRlIGxhcyBjbGFzZXMuXHJcbi8vIGFsIGFncmVnYXIgc3VwZXIuY2xvc2UgYWwgaGlqbywgc2UgdmEgYSByZWluaWNpYXIgeSB0YW1iaWVuIGNlcnJhciBsb3MgcG9wdXBzXHJcbi8vIGFwbGljYW5kbyBsYSBmdW5jaW9uYWxpZGFkIGRlIGNlcnJhZG8gYWwgcGFkcmUgcGVybyAgYWdyZWdhbmRvbGEgY29uIHN1cGVyIGFsIGhpam8uXHJcbiIsImltcG9ydCB7IEZvcm1WYWxpZGF0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5jb25zdCBjYXJkRGF0YTEgPSB7XHJcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbn07XHJcbmNvbnN0IGNhcmREYXRhMiA9IHtcclxuICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG59O1xyXG5jb25zdCBjYXJkRGF0YTMgPSB7XHJcbiAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxufTtcclxuY29uc3QgY2FyZERhdGE0ID0ge1xyXG4gIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG59O1xyXG5jb25zdCBjYXJkRGF0YTUgPSB7XHJcbiAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxufTtcclxuY29uc3QgY2FyZERhdGE2ID0ge1xyXG4gIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICBjYXJkRGF0YTEsXHJcbiAgY2FyZERhdGEyLFxyXG4gIGNhcmREYXRhMyxcclxuICBjYXJkRGF0YTQsXHJcbiAgY2FyZERhdGE1LFxyXG4gIGNhcmREYXRhNixcclxuXTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2VkaXQtbW9kYWxcIik7XHJcblxyXG5jb25zdCBwb2ZpbGVDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fY2xvc2UtbW9kYWxcIik7XHJcblxyXG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX3RpdGxlXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX3RpdGxlLWlucHV0XCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlX19kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy9BZGRfY2FyZF9wcm9maWxlX2VsZW1lbnRzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWRkLWZvcm1cIik7XHJcblxyXG5jb25zdCBwcm9maWxlQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQbGFjZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQbGFjZUlucHV0VXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXQtdHlwZV91cmxcIik7XHJcblxyXG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b25QbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZV9fY2xvc2UtbW9kYWwtcGxhY2VcIlxyXG4pO1xyXG5cclxuY29uc3QgcHJlVmlld0ltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXdfX2ltYWdlX21vZGFsXCIpO1xyXG5cclxuY29uc3QgbW9kYWxJbWFnZUNsb3NlQnV0dG9uID0gcHJlVmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIiNtb2RhbF9faW1hZ2UtY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmNvbnN0IG1vZGFsSW1hZ2VTcmMgPSBwcmVWaWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX19pbWFnZVwiKTtcclxuXHJcbmNvbnN0IG1vZGFsSW1hZ2VEZXNjcmlwdGlvbiA9IHByZVZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWxfX2ltYWdlX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8vLyBjYXJkIGNsYXNzIGZhY3RvcnkvLy8vLy8vL1xyXG5mdW5jdGlvbiBnZXRDYXJkVmlldyhjYXJkRGF0YSkge1xyXG4gIC8vIGNyZWUgdW5hIG51ZXZhIGZ1bmNpb24gcGFyYSBhc2kgcG9kZXIgc2FjYXIgbGEgY2xhc2UgY29uIGVsIG9iamV0byB5IHVzYXJsYSBkb25kZSBxdWllcm8gZ2VuZXJhciBjYXJkcywgY29tbyBlbCBzdW1taXQgZXZlbnRsaXN0ZW5lci5cclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YS5uYW1lIHx8IGNhcmREYXRhLk5hbWUsXHJcbiAgICBjYXJkRGF0YS5saW5rIHx8IGNhcmREYXRhLkxpbmssXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpOyAvLyBhY2EgbGUgZG95IGEgbGEgZnVuY2lvbiBjb24gdG9kb3MgbG9zIGRhdG9zLCB0ZW1wbGF0ZSB5IGhhbmRsZXIgcGFyYSBxdWUgbG9zIHVzZSBlbiBvdHJhIGZ1bmNpb25cclxufVxyXG5cclxuLy8vc3VibWl0IGZ1bmN0aW9ucyAgKGFkZCBhbmQgZWRpdCkgIC8vL1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gaW5wdXRWYWx1ZXM7IC8vIHRvbWEgZWwgbmFtZSB5IGxpbmsgZGUgbG9zIGlucHV0c1xyXG5cclxuICBjb25zdCBjYXJkRGF0YSA9IHtcclxuICAgIC8vIGdlbmVybyB1bmEgY29uc3RhbnRlIHF1ZSB2YSBhIHBhc2FyIGNvbW8gcGFyYW1ldHJvIGRlIGxhIGxjYXNlIGFiYWpvXHJcbiAgICBuYW1lOiBuYW1lLFxyXG4gICAgbGluazogbGluayxcclxuICB9O1xyXG5cclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRWaWV3KGNhcmREYXRhKTsgLy8gaGFnbyBvdHJhIGNvbnN0YW50ZSBwYXJhIGFnYXJyYXIgbGEgY2xhc2UgY29uIGVsIHBhcmFtZXRybyBvIGxvcyB2YWxvcmVzXHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7IC8vIGxhIGNhcmRMaXN0IGVzIHVuIC91bCBlbiBpbmRleC5odG0gc2VwYXJhIGVuIHVuYSA8c2VjdGlvbj5cclxuXHJcbiAgYWRkUGxhY2VQb3B1cC5jbG9zZSgpOyAvLyBsbGFtbyBhbCBjZXJyYWRvIGNvbiBsYSBjb25zdGFudGUgZGUgbGEgY2xhc2UgcXVlIGdlbmVyZSBsYSBjbG9zZSgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICAvLyB1bmEgZm9ybWEgZGUgcmVzdW1pciBtdWx0aXBsZXMgcGFyYW1ldHJvcyBlbiB1bm8gc29sb1xyXG4gIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0gPSBpbnB1dFZhbHVlczsgLy8gdG9wYSBsb3MgdmFsb3JlcyBkZWwgXCJuYW1lXCIgcHJvcGVydHkgZW4gbG9zIGlucHV0c1xyXG5cclxuICBuZXdVc2VySW5mby5zZXRVc2VySW5mbyh0aXRsZSwgZGVzY3JpcHRpb24pOyAvLyBsbGFtbyBlbCBtZXRvZG8gdXNhbmRvIGVsIG5vbWJyZSBkZSBsYSBjb25zdGFudGUgcXVlIHVzZSBwYXJhIGludGFudGlhdGUgbGEgY2xhc2VcclxuXHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpOyAvLyBsbGFtbyBhbCBjbG9zZSgpIHVzYW5kbyBsYSBjb25zdGFudGUgY29uIGxhIGN1YWwgaW52b3F1ZSBsYSBjbGFzZSwgaW1wOiBsbyBwdWVkbyBoYWNlciBlbiBjdWFscXVpZXIgbHVnYXIgcXVlIHJlcXVpZXJhIGxhIGZ1bmNpb25cclxufVxyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0aW9uKHNldHRpbmdzLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5lZGl0Rm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRpb24oc2V0dGluZ3MsIHByb2ZpbGVBZGRGb3JtKTtcclxuYWRkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8vLyBTZWN0aW9uIGNsYXNzLy8vLy9cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogZ2V0Q2FyZFZpZXcgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vLy8vIFBvcHVwcyBpbiBnZW5lcmFsIC8vLy8vXHJcblxyXG5jb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuYWRkUGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRQbGFjZVBvcHVwLm9wZW4oKTsgLy9sbGFtbyBlbCBtZXRvZG8gb3BlbiAoKSBjdWFuZG8gaGFnbyBjbGljayBlbiBlbCBib3Rvbi4gYnVzY28gZWwgYm90b24geSBhZ3JlZ28gZXZlbnRsaXN0ZW5lclxyXG59KTtcclxuXHJcbi8vLy8gUG9wdXBXaXRoRm9ybSBjbGFzcyAvLy8vL1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHsgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiIH0sXHJcbiAgaGFuZGxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5cclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8vIFVzZXJJbmZvIGNsYXNzIC8vL1xyXG5cclxuY29uc3QgbmV3VXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIC8vIGxsYW1vIGEgbGEgY2xhc2UgcGFyYSB1c2FyIGxvcyBtZXRvZG9zXHJcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlX190aXRsZVwiLCAvLyBsb3Mgc2VsZWN0b3JlcyBxdWUgdXNlLCBub3NlIHBvcnF1ZSBubyBsbGV2YW4gLWlucHV0IGFsIGZpbmFsLlxyXG4gIGpvYlNlbGVjdG9yOiBcIiNwcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBjdXJyZW50VXNlciA9IG5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKCk7IC8vdXNhciBsYSBmdW5jaW9uIHF1ZSBvYnRpZW5lIGxhIGluZm8gIHkgcG9uZXJsYSBlbiB1bmEgY29uc3RhbnRlXHJcblxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXIubmFtZS50cmltKCk7IC8vIHVzYXIgZWwgc2VsZWN0b3IgZGUgbG9zIGlucHV0cywgeSBwb25lcmxlIGxhIGNvbnN0YW50ZSBtYXMgZWwgcGFyYW1ldHJvIHF1ZSBzZSB1c28gZW4gbGEgZnVuY2lvbiBkZSBsYSBjbGFzZVxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXIuam9iLnRyaW0oKTtcclxuXHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkUGxhY2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHsgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZV9fYWRkLWZvcm1cIiB9LFxyXG4gIGhhbmRsZUFkZEZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmFkZFBsYWNlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLy8gUG9wdXBXaXRoSW1hZ2UgY2xhc3MgLy8vL1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3X19pbWFnZV9tb2RhbFwiKTsgLy9sbGFtbyBhIGxhIGNsYXNlIChpbnNhdG50aWF0ZSlcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcclxuICAvLyBnZW5lcm8gdW5hIGZ1bmNpb24gcGFyYSBwb2RlciB1c2FyIHVuIG1ldG9kbyBkZSBsYSBjbGFzZSBlbiBvdHJvcyBsdWdhcmVzIChlamVtcGxvOmN1YW5kbyBjcmVvIG51ZXZhIGNhcnRhfSlcclxuICBwb3B1cEltYWdlLm9wZW4oY2FyZERhdGEpO1xyXG59XHJcblxyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vYWN0aXZvIGxvcyBldmVudExpc3RlbmVycyBkZSBsYSBjbGFzZSB1c2FuZG8gbGEgY29uc3RhbnRlXHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIG1ldG9kbyBxdWUgdG9tYSBlbCBjb250ZW5pZG8gZW4gdGV4dG8gZGVsIHNlbGVjdG9yXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgIC8vZnVuY2lvbiBxdWUgaGFjZSBkaXNwbGF5IGRlIGxvcyBwYXJhbWV0cm9zIHF1ZSBwYXNvLiB1c2FyIGVzdG9zIGVuIGxhIGludGlhbnRpYXRpb25cclxuICAgIGlmICghdGhpcy5fbmFtZSB8fCAhdGhpcy5fam9iKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJOYW1lIG9yIGpvYiBlbGVtZW50IGlzIG5vdCBmb3VuZC5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlX2Rlc2NyaXB0aW9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuXHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0aW9uIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiaW5wdXRFbCIsIl9lcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfY2hlY2tJbnB1dFZhbGlkaXR5Iiwib3B0aW9ucyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwic29tZSIsIl9lbmFibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZGlzYWJsZUJ1dHRvbiIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIkNhcmQiLCJuYW1lIiwibGluayIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRFbGVtZW50IiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXR0ZUJ1dHRvbiIsInRvZ2dsZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzZXRBdHRyaWJ1dGUiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9mb3JtSW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dE9iamVjdCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZUFkZEZvcm0iLCJwcmVWaWV3SW1hZ2VNb2RhbCIsImZvcm1TZWxlY3RvciIsImdldENhcmRWaWV3IiwiY2FyZERhdGEiLCJOYW1lIiwiTGluayIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiYWRkUGxhY2VQb3B1cCIsImVkaXRQcm9maWxlUG9wdXAiLCJpbnB1dFZhbHVlcyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJuZXdVc2VySW5mbyIsInNldFVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfam9iIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJjb25zb2xlIiwiZXJyb3IiLCJjdXJyZW50VXNlciIsInRyaW0iLCJjYXJkRWxlbWVudCIsInBvcHVwSW1hZ2UiLCJkYXRhIiwiX2Rlc2NyaXB0aW9uIiwiX2ltYWdlIiwic3JjIiwiYWx0Il0sInNvdXJjZVJvb3QiOiIifQ==